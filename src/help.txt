Dichotic Harmony Accords Generator. Version 3.04 from August, 2011.
Материалы проекта можно свободно использовать для ознакомительных и учебных целей.
Любое другое применение этих материалов требует отдельного разрешения автора.
Copyright (c) 2010 Vadim Madgazin. All Rights reserved Worldwide.


1. Функция программы.


Dichotic Harmony Project посвящён созданию теоретической базы и программного
обеспечения для порождения музыкальных произведений нового типа, использующих
метод дихотического слушания как основополагающий принцип в современном искусстве
композиции и аранжировки, в том числе, и преимущественно классических музыкальных
произведений.

Как известно, при разведении двух гармонических звуков по одному в каждое ухо
("дихотическое слушание" - 2H) происходит уменьшение диссонантности созвучия.

Диссонантность многоголосных аккордов можно уменьшить точно таким же образом,
направляя часть голосов в одно ухо, а остальную часть - в другое.
При этом "эмоциональное взаимодействие" разведённых по разным ушам голосов в
значительной степени сохраняется.

Т.о. сложные диссонантные аккорды могут восприниматься значительно более чисто.
Это позволяет надеяться, что благодаря дихотическому слушанию можно увеличить
"благозвучность" музыкальных произведений с весьма сложной гармонией.

Аналогия данного процесса - пространственное разнесение накладывающихся друг на
друга частей составного изображения (например в 3D кинематографе).

Программа DHAG позволяет составлять и прослушивать 1...15 голосные аккорды во
всём диапазоне РТС12 (равномерно темперированного строя с 12 нотами в октаве),
присваивая каждому голосу одну из трёх точек стерео панорамы:
левый край, центр, правый край.

Звук, расположенный в центре панорамы на самом деле состоит из пары одинаковых
звуков половинной мощности, расположенных на левом и правом её краю.

Ограничение в 15 голосов вызвано применённой для управления параметрами голоса
схемой "1 голос = 1 midi канал".

Звуки левой, правой точек панорамы должны попадать только в левое, правое ухо
соответственно. Поэтому для прослушивания звука необходимы высококачественные
стерео наушники, а внешняя акустическая система должна быть отключена.

Выходом программы является поток midi сообщений, посылаемых на устройство ОС
Windows "MIDI Out Device", которое и синтезирует звуковой сигнал.

Программа позволяет обрабатывать обычные и дихотические аккорды из 128 голосов
а также их последовательности (цепочки аккордов, фактически музыку), сохранять
их во внешних файлах типа daccords и загружать их.

Однако голоса свыше 12-ти можно создавать и менять только путём редактирования
текста, содержащегося в этих файлах, а прослушивать - при помощи преобразования
их в midi файлы и проигрывания последних.


2. Органы управления и индикаторы основного диалогбокса.


Левая группа сверху вниз.


Длинное поле строки редактора текста комментария файла аккордов.

"HELP" открытие этого текста помощи.

"WEB SITE" выход на веб сайт программы.

"CLOSE" завершение работы программы.

"-v1 note N" включение звука ноты 1-го голоса в левой точке панорамы.
Перед литерой v стоит знак панорамы: "-" для левой точки, "+" для правой, без
знака для центра. После слова "note" следует число N (возможно со знаком),
это относительный номер ноты голоса.

Короткий слайдер на 3 позиции регулирует панораму голоса.

Длинный слайдер на 12+ позиций регулирует относительный номер ноты голоса:
0 "до" (C), 1 "до диез" (C#), 2 "ре" (D) и т.д.
этот номер может быть отрицательным: -1 "си" (B), -2 "ля диез" (A#) и т.д.

Каждая тройка голосов объединяется в группу, справа от которой находятся три
регулятора, синхронно меняющих номера нот всех голосов группы.

Всего имеются регуляторы 12 голосов, поделённых на 4 группы.

Ниже 12-го голоса расположены общие регуляторы для всех голосов.

"Voices Switch" отключение всех голосов, затем включение голосов 1-6.

"Pan" изменение панорамы всех голосов.

"Generate Accord" генерация звука текущего аккорда, составленного из включённых
 регуляторов голосов.

"No Sound" низкоуровневое отключение звука.

"All 0" сброс всех относительных номеров нот в ноль.

"Stereo X" регулятор стереобазы звука от 0 (моно) до 1 (нормальное значение).
При стереобазе X<1 в каждый канал подмешивается звук противоположного канала.

"Shift D" регулятор дополнительного сдвига высоты всех нот аккорда В = -12...+12
полутонов. Относительный номер ноты аккорда перед использованием суммируется с D.

"2H Converter Mode" при включении появляется дополнительный Dialog Box 1 с частичным
набором регуляторов и производится 2H конвертация текущего аккорда секвенции основного
диалогбокса, повторяющаяся при смене номера аккорда или при загрузке новой секвенции.
Конвертация заключается в формировании множества всех сочетаний голосов аккорда при
их равноколичественном разделении по 2-м крайним точкам панорамы (если есть остаточный
голос, то он помещается в центр), и помещении этого множества в виде секвенции в Box 1
с предварительной сортировкой в порядке возрастания полного диссонанса 2H аккорда.
Если включён регулятор "Edit Sequence" (см. ниже) то для конвертации берётся аккорд из
регуляторов голосов.
Если отключён регулятор "With Unisons" из группы "Manipulators" (см. ниже) то перед
конвертацией из аккорда удаляются все лишние голоса-унисоны (с любой панорамой) и все
беззвучные голоса.

"Auto Convert" в режиме "2H Converter Mode" появляется дополнительный Dialog Box 2,
в котором формируется секвенция из аккордов исходной секвенции основного диалогбокса,
каждый из которых сконвертирован в лучший 2H вариант - с наименьшим диссонансом.

"With Unisons" в отключённом состоянии этого регулятора в режиме "2H Converter Mode"
все аккорды с унисонами (с совпадающими нотами в одной точке панорамы или в центре и
на любом краю) будут удалены из массива 2H вариантов исходного аккорда (из секвенции
в Box 1).

"Mirror Accords" в отключённом состоянии этого регулятора в режиме "2H Converter Mode"
все зеркальные аккорды (отличающиеся только инверсией панорам голосов) будут удалены
из массива 2H вариантов исходного аккорда (из секвенции в Box 1).


Нижние группы "Manipulators" и "Accord Notes".


"With Unisons" отключение звука конфликтующих голосов аккорда, когда несколько
голосов с одинаковыми номерами нот попадают на один край панорамы звука.
Голоса с центральной (нулевой) панорамой попадают на оба края панорамы!

"Dichotic Output" дихотический выход, при сбросе его все голоса панорамируются
в центр (монофонический звук).

"Swap Output" перестановка местами левой и правой точек панорамы.

"One Octave" приведение номеров нот аккорда к диапазону 0...11 (в одну октаву),
влияет только на генерацию звука аккорда.

"Unique Notes" индикатор числа уникальных нот в аккорде, игнорируя их панораму.

"Dichotic Diss" индикатор суммы диссонансов всех попарных интервалов аккорда с
учётом принятой модели дихотического восприятия, где считается, что интервал
между крайними точками панорамы не даёт диссонанса, а интервал между центром
панорамы и любым краем даёт половину обычного диссонанса.

"Left:" включение звука левой точки панорамы; индикатор списка относительных
 номеров нот голосов текущего аккорда, воспроизводимых в этой точке панорамы.

"Mid:" то же для центральной точки панорамы.

"Right:" то же для правой точки панорамы.
При записи текущего аккорда (который получается при нажатии "Generate Accord")
в файл попадают только те голоса, которые появляются в этих трёх индикаторах.

"Show Sorted Notes" сортирует голоса в индикаторах по величине номеров нот.

"Original Notes" в положении "Zero Ground Notes" прибавляет к числам номеров
нот одинаковую величину, чтобы минимальное стало равным 0. Не влияет на звук.


Правая группа сверху вниз.


"Edit Comment" редактирование текста комментария, записываемого при создании
файла аккордов. При редактировании отключаются "Горячие клавиши".

"MIDI Out Device" выбор устройства воспроизведения звука, напр. - Программный
синтезатор звуковой.

"GM Instrument" General Midi инструмент, тембром которого будут звучать все
голоса одного аккорда.

"Don't Mute" в положении "Mute Sound" ослабляет, в "Soundless" - отключает звук.

"Don't Change General Midi Instrument" игнорирование инструмента из цепочки
аккордов, который т.о. может меняться вручную, см. "GM Instrument".

"Volume" громкость звука аккорда, фактически - скорость нажатия нотных клавиш.

"Transposition" высота всех нот аккорда изменяется на данное число полутонов,
это число, которое нужно прибавить к относительному номеру ноты каждого голоса
чтобы получить абсолютный midi номер его ноты.

"Temp (bps)" темп метронома, количество ударов в секунду.

"Duration" длительность аккорда в ударах метронома.

"Big Duration" увеличивает предел "Duration" с 1000 до 10000.

"Append Accord" добавление текущего аккорда в "*.daccords" файл без уничтожения
его старого содержимого. Так создаётся цепочка аккордов.

"Save Accord" сохранение одного текущего аккорда в файл.

"Load Accord(s)" чтение аккорда (или цепочки аккордов) из файла.

"Save Accords Chain" сохранение всей цепочки аккордов в файл.

"Save with Manipulators" при записи на диск каждый аккорда пропускается через
функционал нижней группы Manipulators.

"Don't Save Empty Voices" при записи на диск исключает из аккорда все беззвучные
голоса, "сжимая" аккорд.

"Accord N of M" порядковый номер N текущего аккорда и длина M цепочки аккордов.

"Chain Speed" скорость проигрывания цепочки аккордов (исходная скорость = 1).

"Loop Chain" зацикливание проигрывания цепочки аккордов.

"Play Chain", "Stop Chain", "Rewind" Играть, Пауза, Перемотать в начало - кнопки
управление проигрыванием цепочки аккордов.

"Edit Sequence" редактирование цепочки аккордов: перед сохранением цепочки в файл
производится замена текущего аккорда "Accord N" на аккорд из регуляторов голосов.

Опытным пользователям:
для нормальной работы этих органов управления в секвенции аккордов не должно быть
аккордов-пауз, а все аккорды должны иметь одинаковое число голосов (3+3: 3 слева
и 3 справа, или >=2 в монофоническом режиме).

"Add Inverse Pan" добавление в секвенции после каждого аккорда такого же аккорда с
инверсной панорамой всех голосов.

"Del Identic (3+3)" обработка "сырых" 6-голосных (3+3) 2H-секвенций: удаление лишних
совпадающих аккордов, сортировка их в порядке увеличения номеров нот, запись в файл.

"Del Identic (2+2)" обработка "сырых" 4-голосных  (2+2) 2H-секвенций: удаление лишних
совпадающих аккордов, сортировка их в порядке увеличения номеров нот, запись в файл.
Также работает с 5-голосными секвенциями, игнорируя средний голос каждого аккорда,
который в частности может быть "паузой".

"Sort Similar Accords" функция зависит от режима "Sort Mode":

в режиме "Sort Mode Mono":
аккорд секвенции номер "Accord №" становится первым, остальные аккорды выстраиваются
в порядке роста степени отличия от него, путём определения суммы модулей отклонений
каждого голоса аккорда; предварительно все аккорды превращаются в монофонические с
сортировкой голосов по порядку возрастания номеров нот, т.о. "смысл" аккордов может
несколько меняться от оригинального, зато такой режим сортировки работает при любом
числе голосов N в аккордах секвенции (N=const, N>=2);

в режиме "Sort Mode 3+3":
делается то же самое, но степень отличия аккорда определяется в половинах 6-голосных
аккордов (т.е. в каждом канале панорамы отдельно), конкретно по голосам 0-2 и 3-5,
проверяется также инверсный вариант аккорда (голоса 0-2 одного аккорда сравниваются
с голосами 3-5 другого).

"Sort Mode" в отжатом состоянии "Sort Mode 3+3", в нажатом состоянии "Sort Mode Mono".


3. Горячие клавиши.


Insert или Ctrl  генерация звука текущего аккорда

5    переключение состояния регулятора "Swap Output"

4,6  изменение номера текущего аккорда секвенции на -1,+1

F1...F8  несколько фиксированных General Midi инструментов


4. Внешние файлы.


Это текстовые файлы в Unicode кодировке.

"drfile.txt" файл с таблицей диссонансов каждого интервала "Dissonance[interval]",
 числа идут по порядку интервалов, начиная с нулевого.
 Числа должны отделяться друг от друга хотя бы одним пробелом или новой строкой.

"*.daccords" файл с одним аккордом или с цепочкой аккордов (до 5000 шт.).
 В начале файла несколько первых строк общих параметров, затем последовательность
 аккордов по 1 аккорду на строке. Пауза кодируется как аккорд с нулевым числом
 голосов. Промежуточные отключенные голоса также записываются в файл, т.о. номера
 (1...12) включённых голосов каждого аккорда сохраняются оригинальными.
 При записи в файл в конце строки каждого аккорда добавляется пробел, знак ';' и
 порядковый номер аккорда.
 При чтении и записи секвенций аккордов сохраняется одно слово комментария длиной
 до 15-ти литер, это следующее слово после номера аккорда (а если номера нет, то
 после аккорда); если комментарий есть - он отделён одним пробелом.


5. Первый запуск программы.


После запуска приложения нажмите длинную кнопку ниже и левее центра окна диалога
с названием "Generate Accord".

При этом должен возникнуть звук фортепиано, мажорный аккорд "до-ми-соль".

Если звука нет, проверьте наличие программного или аппаратного музыкального
синтезатора звука в выпадающем списке "MIDI Out Device", а также увеличте громкость
соответствующим регулятором на панели микшера звука.

Перемещая регуляторы трёх верхних длинных горизонтальных слайдеров можно изменять
нотный состав звучащего аккорда.

Нажимая или отпуская кнопки в левом крайнем ряду можно менять количество голосов
аккорда.

"Лишние" одинаковые по высоте ноты при отключенном манипуляторе "With Unisons" не
звучат.

Наденьте стерео наушники, отключите внешнюю акустическую систему.

Перемещая регуляторы коротких слайдеров рядом с кнопками включения голосов можно
изменять панораму (звуковую позицию) каждого отдельного голоса:
слева, по центру, справа.


6. Важное замечание.


Многие звуковые системы ПК (даже при использовании наушников) подмешивают часть
звука правого канала в левый и наоборот.

Проверить наличие или отсутствие этого недостатка можно так.

Панорамируйте все голоса аккорда в левый канал, снимите наушники и прослушайте
звук аккорда сначала в одном левом наушнике (должен быть громкий звук), а затем
в одном правом (должна быть тишина). Поменяйте панорамы на правый канал и опять
проверьте.

Если уровень разделения звуковых каналов невелик, вы не сможете в полной мере
оценить новое качество дихотического восприятия аккордов.

Другое требование - сами наушники должны иметь высокую верность передачи звука
(Hi-Fi), иначе сложные аккорды будут звучать "грязно".


7. Демонстрация дихотической гармонии (2H).


Нажмите кнопку "Load Accord(s)" и выберите для загрузки файл
"01 Гамма до мажор с малой секундой" (с расширением .daccords),
затем нажмите кнопку "Play Chain".

Вы услышите дихотическую гамму до мажор в левом канале и одновременно ту же гамму
со сдвигом в один полутон в правом канале. Затем то же самое будет проиграно
обычным, монофоническим образом (в центре панорамы).
Легко видеть (точнее, слышать), что дихотическая "двойная" гамма значительно
приятнее на слух, чем монофоническая (которая просто "режет слух").

Теперь загрузите и прослушайте файл "02 Гамма двумя мажорными аккордами".
Чтобы сравнить его звук с монофоническим надо вручную убрать флажок в чекбоксе
"Dichotic Output" (не забудьте потом включить его опять).

Теперь загрузите и прослушайте "03 Мажорный аккорд с разным сдвигом".
Тут дихотический и обычный режимы будут чередоваться автоматически. Скорость смены
аккордов можно уменьшить в 2 раза поставив регулятор "Chain Speed" на отметку 0.5.

Вы можете также прослушать каждый аккорд "вручную" - передвигая слайдер "Accord №"
и нажимая кнопку "Generate Accord" (или клавиши Insert, Ctrl на клавиатуре ПК).

Если поставить флажок в чекбоксе "Don't Change General Midi Instrument", то можно
также вручную менять музыкальный инструмент.
Обратите внимание на дихотический аккорд 25 (и обычный аккорд 27). Это знаменитый
дважды-ладовый аккорд Скрябина: два мажорных трезвучия со сдвигом в тритон.

Теперь послушаем аккорды посложнее.

"04 Мажоро-минор с разным сдвигом" содержит дихотическую пару - мажорное и минорное
трезвучия с переменным сдвигом между нижними голосами. Самостоятельно оцените звук
дихотического и монофонического варианта каждого аккорда. Кажется, что некоторые из
них звучат "осмысленно" в обоих случаях, и воспринимаются неодинаково не только
из-за значительной разнице в диссонансе, но и благодаря усилению "полезных" связей
между голосами из разных трезвучий.

Остальные файлы попробуйте "разобрать" сами (см. примечания внутри них):
"05 Мажоро-минор с совпадением нот",
"06 Минорный аккорд с разным сдвигом",
"07 Дважды лады на белых клавишах",
"08 Секвенция 3-х голосных аккордов",
"09 Септаккорды обычные и дихотические".

Кое-что о музыке.

Директория DISS_MUSIC содержит несколько файлов "обычной" музыки, преобразованной
в дихотическую путём добавления к каждому голосу ещё одного, сдвинутого на малую
секунду. При отключении "Dichotic Output" эту музыку вовсе невозможно слушать,
так она диссонирует, но вот в дихотическом варианте на удивление - можно!

Замечание: нотный текст этих произведений был позаимствован из сторонних файлов и
не проверялся на аутентичность, кроме того данная версия программы не способна
точно передавать музыку в быстром темпе, поэтому не судите строго, эти примеры -
всего лишь иллюстрация степени влияния дихотического способа проигрывания музыки
на её диссонантность.

Дихотическую музыку в быстром темпе, с короткими нотами или при числе одновременно
звучащих голосов свыше 15-ти лучше прослушивать после сохранения её в midi файлы,
при помощи любого midi плеера.
Многие .daccords файлы программы уже имеют свои .mid копии - см. папку "midi".

Чтобы оценить дихотическую гармонию (2H) не только со стороны "меньшего зла", но и
со стороны "большего добра" необходимо создать хотя бы несколько новых неординарных
музыкальных произведений, построенных в основном на достаточно сложных дихотических
аккордах, и желательно на таковых, которые значительно отличаются по восприятию от
обычных аккордов.

Может быть Вы захотите заняться этим?
Для этого Вам может понадобиться "библиотека" дихотических аккордов.


8. Библиотека 4-6 голосных 2H-аккордов.


Библиотека благозвучных дихотических аккордов расположена в директории 2H_LIB.

В файле 10 (его полное имя "10 исходные аккорды.daccords") приведено 24 "обычных"
2-3 голосных аккордов, на основе которых созданы файлы 11-17 библиотеки.

Эти исходные аккорды состоят из 6 интервалов, 3-х мажорных, 3-х минорных и 12
других (не слишком диссонантных) трёхголосных аккордов.

Все 2H-аккорды данной библиотеки состоят из достаточно благозвучных комбинаций
одинаковых или разных исходных аккордов друг с другом, подаваемых в левый и правый
каналы звука и сдвигаемых по высоте на произвольный интервал, но так чтобы весь 2H
аккорд умещался в пределах одной октавы.

Т.к. отбор всевозможных комбинаций исходных аккордов производился на слух, то эта
библиотека может страдать следующими недостатками:
-она может не включать некоторые другие достаточно благозвучные 2H-аккорды
-факт благозвучия некоторых аккордов библиотеки может быть спорным.

Кроме того, может показаться что некоторая часть множества 2H аккордов библиотеки
на слух имеет довольно значительное сходство друг с другом.

Так это или иначе - не мне судить, но тем не менее перед Вами первая и скорее всего
пока единственная в мире библиотека из примерно 450 дихотических аккордов, на базе
которой можно начинать создавать новые или аранжировать уже имеющиеся музыкальные
произведения.

В качестве иллюстрации сходств и/или различий 2H аккордов библиотеки к программе
прилагается пара простых секвенций (SEC 01 и SEC 01a), которые можно проигрывать с
зацикливанием.


9. Для опытных пользователей.


Программа позволяет конструировать произвольные дихотические аккорды значительной
сложности (до 12 голосов) и делать из них небольшие музыкальные отрывки.

При создании дихотического варианта известных или новых аккордов Вам может пригодится
индикатор "Dichotic Diss", который на основе таблицы диссонансов интервалов из файла
"drfile.txt" рассчитывает суммарный диссонанс аккорда. Разумеется из-за погрешностей
как принятой модели, так и самих данных таблицы эта цифра не может всегда идеально
соответствовать именно Вашему восприятию диссонантности различных аккордов.

Не всегда нужно стремиться к уменьшению суммарного диссонанса аккорда до абсолютного
минимума.
От конкретной панорамы каждого голоса аккорда кроме диссонантности до некоторой
степени зависят и другие параметры его восприятия:
"тембр",
"эмоциональный букет",
"наполненность" (степень взаимодействия голосов),
"виртуальная высота".

И даже простой обмен местами левого и правого стерео канала звука может вызвать
изменение восприятия дихотического аккорда (как правило, тембральное).

Чтобы создать последовательность аккордов сконструируйте 1-й аккорд и запишите его
в новый файл кнопкой "Save Accord". Затем сконструируйте следующий аккорд и добавьте
его к тому же самому файлу кнопкой "Append Accord", и т.д.

Прослушайте всю цепочку аккордов, загрузив их из файла кнопкой "Load Accord(s)".

При выбранном состоянии чекбокса "Edit Sequence" Вы можете вручную "отредактировать"
один аккорд, на который указывает регулятор "Accord N" и записать результат (вместе
со всеми остальными аккордами) обратно в файл.

Т.к. все файлы программы являются текстовыми в кодировке Unicode, их можно править
также вручную при помощи Блокнота или другого редактора текста. Понять формат файлов
довольно просто благодаря присутствующим в них комментариям, лучше не удаляйте их!

Удачи Вам в новом деле!


10. Конвертер daccords <--> midi.


Для преобразования любых daccords файлов в файлы формата midi, а также для обратной
конвертации (с максимальным приближением к midi оригиналу) может быть использовано
программное обеспечение, расположенное в папке "utils".
См там же соответствующую документацию.

Многие .daccords файлы программы имеют свои .mid копии - см. папку "midi".


11. Сопутствующие разработки и публикации автора.


Библиотека для работы с midi файлами JDKSMIDI C++ midi library (2-й разработчик).
Создатель библиотеки Jeff Koftinoff, Канада. http://github.com/vadimrm/jdksmidi

Dichotic Harmony Files Converter (преобразователь файлов daccords <--> midi).
Версия 1.21 от 17 июня 2011 г. См. папку "utils".
Исходный код https://github.com/vadimrm/Dichotic-Harmony-Files-Converter

Dichotic Harmony Keyboard (дихотическая обработка сигналов midi синтезатора).
Версия 1.2 от 21 апреля 2010 г. См. папку "addons".

Папка "arxiv":

Дихотическая гармония для музыкальной практики. 14.05.2010
Dichotic harmony for the musical practice. http://arxiv.org/abs/1005.2465

Информационная теория эмоций музыкальных аккордов. 22.09.2009
The Information Theory of Emotions of Musical Chords. http://arxiv.org/abs/0909.3976

Мажор и минор. Формула музыкальных эмоций. 22.05.2009
Major and minor. The formula of musical emotions. http://arxiv.org/abs/0905.3678


12. Проект в сети и контакты автора.


Домашняя страница проекта http://vmgames.com/ru/music/

Исходный код проекта https://github.com/vadimrm/Dichotic-Harmony-Project

Вадим Мадгазин, Зеленоград, Россия. mailto: vadim@vmgames.com


Версия текста от 5.08.2011
